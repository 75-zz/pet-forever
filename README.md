# Pet Forever - 愛犬のメモリアル動画カレンダー

愛犬の思い出を毎日振り返る、メモリアル動画カレンダーWebアプリです。

## 🐾 特徴

- **週替わり動画再生**: 毎週異なる動画を自動的に再生
- **画像スライドショー**: 2枚の画像を左右に配置し、緩やかに上から下にアニメーション
- **フェード効果**: 動画・画像が滑らかにフェードイン・フェードアウト
- **カレンダー表示**: 日付や月のカレンダーを常に最前面に表示（表示/非表示切替可能）
- **多様性のある画像選択**: 履歴管理とタグ分散による偏りのない画像表示
- **豊富な設定項目**: 背景色、言語、アニメーション速度など細かくカスタマイズ可能
- **PWA対応**: アプリとしてインストール可能、オフラインでも動作
- **完全ローカル**: すべてのデータはブラウザのIndexedDBに保存

## 🚀 使い方

### 開発環境のセットアップ

```bash
# 依存関係のインストール
npm install

# 開発サーバーの起動
npm run dev
```

ブラウザで `http://localhost:3000` を開いてください。

### ビルド

```bash
# プロダクションビルド
npm run build

# ビルドしたアプリの起動
npm start
```

## 📖 基本的な使い方

### 1. メディアの追加

1. 右上の「📁 メディア」ボタンをクリック
2. 「画像を追加」または「動画を追加」をクリック
3. ファイルを選択してアップロード

### 2. 週ごとの動画割り当て

- メディアライブラリで動画を週番号（第1週〜第4週）に割り当て
- 現在の週に対応する動画が自動的に再生されます

### 3. 再生コントロール

- **スペースキー**: 再生/一時停止
- **Fキー**: 全画面表示の切り替え
- **▶ 再生ボタン**: 画面下部のボタンで再生/停止

### 4. 設定のカスタマイズ

右上の「⚙️ 設定」ボタンから以下を調整できます：

**基本設定**
- 言語（日本語/英語）
- 背景色（カラーピッカーで自由に選択）

**カレンダー設定**
- カレンダー表示のON/OFF
- 1日表示 / 1か月表示
- 週の開始曜日（日曜/月曜）

**メディア設定**
- 画像表示時間（3〜15秒）
- フェードイン時間（0.5〜3秒）
- フェードアウト時間（0.5〜3秒）
- アニメーション速度（0.5〜2倍速）
- 音量（0〜100%）

## 🏗️ 技術スタック

- **フレームワーク**: Next.js 14 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **状態管理**: Zustand
- **データ永続化**: IndexedDB (idb)
- **日付処理**: date-fns
- **PWA**: Next.js PWA対応

## 📁 プロジェクト構造

```
src/
├── app/              # Next.js App Router
│   ├── layout.tsx    # ルートレイアウト
│   └── page.tsx      # トップページ
├── components/       # Reactコンポーネント
│   ├── Calendar.tsx      # カレンダー表示
│   ├── MediaPlayer.tsx   # メディアプレーヤー
│   ├── Player.tsx        # プレーヤー画面
│   └── MediaLibrary.tsx  # メディアライブラリ
├── lib/
│   ├── services/     # ビジネスロジック（OOP）
│   │   ├── CalendarService.ts        # カレンダー計算
│   │   ├── WeeklyVideoScheduler.ts   # 週次動画管理
│   │   ├── DiversityPicker.ts        # 画像多様性管理
│   │   ├── ShuffleQueue.ts           # 重み付きシャッフル
│   │   └── RoundConductor.ts         # 再生シーケンス管理
│   ├── stores/       # Zustand状態管理
│   │   └── useAppStore.ts
│   ├── db/           # IndexedDB永続化
│   │   └── StorageRepo.ts
│   └── types/        # TypeScript型定義
│       └── index.ts
└── styles/           # グローバルスタイル
    └── globals.css
```

## 🎨 デザイン仕様

### レイヤー構造（Z-index）

| Z-index | レイヤー |
|---------|---------|
| 200 | コントロールUI（設定・ボタン） |
| 100 | カレンダー |
| 10 | メディア（動画・画像） |
| 0 | 背景 |

### カレンダー表示

- 黒文字（白背景用）で視認性を確保
- 6つの位置から選択可能
- 日本語/英語対応
- 記念日のハイライト表示
- 表示/非表示切替可能

### 画像表示

- 2枚を左右に配置（重ならない）
- 緩やかな上から下へのアニメーション
- フェードイン・フェードアウト効果
- アニメーション速度調整可能（0.5〜2倍速）

## 🔧 カスタマイズ

### 設定項目

**基本設定**
- **言語**: 日本語/英語
- **背景色**: 自由に選択可能（デフォルトは白）

**カレンダー設定**
- **表示ON/OFF**: カレンダーの表示/非表示切替
- **表示モード**: 1日表示/1か月表示
- **週開始日**: 日曜/月曜

**メディア設定**
- **画像表示時間**: 3〜15秒で調整
- **フェードイン時間**: 0.5〜3秒
- **フェードアウト時間**: 0.5〜3秒
- **アニメーション速度**: 0.5〜2倍速（1.0が標準）
- **音量**: 0〜100%

## 📝 今後の拡張予定

- Google Photos連携
- BGM追加機能
- 顔検出による自動フレーミング
- 記念日の特別演出
- 思い出アーカイブビュー
- シェア用ショートクリップ生成

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

## 🐕 コントリビューション

プルリクエストや機能提案は大歓迎です！

---

大切な愛犬との思い出を、毎日少しずつ振り返りましょう 🐾
